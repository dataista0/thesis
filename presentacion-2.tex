\fontsize{9.5pt}{8.2}\selectfont
\section{Dominio cerrado (Popescu/World)}
\subsection{Introducción}

\frametitle{Introducción}
\begin{frame}[<+->]
  \frametitle{Dominio de problemas / Modelo teórico}
   \begin{block}{Dominio cerrado: acotado y específico}
      \begin{itemize}
          \item Por ejemplo: Restaurants, bancos, vuelos, libros.
          \item Bases de datos relacionales $\rightarrow$ datos estructurados
      \end{itemize}
    \end{block}

  \begin{block}{Modelo teórico: tratabilidad semántica}
    \begin{itemize}
          \item QADB: Question answering como interfaz para una base de datos
          \item \textbf{Tratabilidad semántica de una pregunta $q$ en el contexto de una DB $d$}.
          \item Base de datos relacional de juguete de MySQL, World, con \textbf{información geográfica básica de países, ciudades e idiomas}.
          \item Funcionalidad acotada  $\rightarrow$ soporte solo para el inglés.
    \end{itemize}
  \end{block}
\end{frame}


\begin{frame}
  \frametitle{Ejemplo}
  \begin{block}{Pregunta}<2->
      \textbf{When was Albert Einstein born?}
  \end{block}
  \begin{columns}<3->
      \begin{column}{.5\textwidth}
      \end{column}
      \begin{column}{.1\textwidth}
      \begin{tikzpicture}[>=stealth, rotate border/.style={shape border uses incircle, shape border rotate=270}]
              \node[rotate border=-40, fill=black, minimum height=1.0cm, single arrow, single arrow head extend=.3cm, single arrow head indent=.1cm, inner sep=1.5pt] (arrow) {};
          \end{tikzpicture}
      \end{column}
      \begin{column}{.3\textwidth}
          %Question Answering
      \end{column}
      \begin{column}{.5\textwidth}

      \end{column}
  \end{columns}

  \begin{exampleblock}{Consulta SQL}<3->
\textbf{{\color{purple}SELECT} birth\_date \newline
      {\color{purple}FROM} scientists\newline
      {\color{purple}WHERE} name $=$ {\color{green}`Albert Einstein'}
      }
  \end{exampleblock}
  \begin{columns}<4->
      \begin{column}{.5\textwidth}
      \end{column}
      \begin{column}{.1\textwidth}
      \begin{tikzpicture}[>=stealth, rotate border/.style={shape border uses incircle, shape border rotate=270}]
              \node[rotate border=-40, fill=black, minimum height=1.0cm, single arrow, single arrow head extend=.3cm, single arrow head indent=.1cm, inner sep=1.5pt] (arrow) {};
          \end{tikzpicture}
      \end{column}
      \begin{column}{.3\textwidth}
          %Question Answering
      \end{column}
      \begin{column}{.5\textwidth}

      \end{column}
  \end{columns}

  \begin{alertblock}{Respuesta}<4->
      \textbf{March 14th, 1879}
  \end{alertblock}

\end{frame}



\subsection{Modelo teórico}


\begin{frame}[<+->]
  \frametitle{Tratabilidad semántica / motivación}
      \begin{itemize}
          \item La complejidad de las preguntas en lenguaje natural es arbitrariamente grande.
          \item Distinguir un subconjunto 1) \textit{tratable} y 2) \textit{abarcativo}
          \begin{itemize}
            \item La {\color{blue}\textbf{tratabilidad semántica}} define ese conjunto
          \end{itemize}
          \item Rechazar y pedir reformulación de las no tratables
          \begin{itemize}
            \item Es mejor no dar respuesta a dar una mala. 
            \item Conservar la confianza en el sistema.
          \end{itemize}
      \end{itemize}
\end{frame}

\begin{frame}[<+->]
  \frametitle{Tratabilidad semántica / intuición}
    \begin{block}{Tratabilidad semántica en el contexto de una DB}
      \begin{itemize}
          \item Una {\color{green}Q-word} (Qué, quién, cuándo, dónde, etc.)
          \item Pares de {\color{blue}atributos} y {\color{blue}valores}
          \item {\color{purple}Valores} sueltos
          \item Términos no significativos y {\color{orange}menciones a relaciones}
          \item Por ejemplo:
            \begin{itemize}
              \item ¿{\color{green}Qué} {\color{orange}bancos} de la {\color{blue}empresa Credicoop} están localizados en el {\color{blue}barrio} de {\color{blue}Coghlan}?
              \item ¿{\color{green}Qué} {\color{orange}países} de {\color{purple}Asia} se {\color{blue}independizaron} en {\color{blue}1948}?
            \end{itemize}
      \end{itemize}
    \end{block}
\end{frame}

\fontsize{9.5pt}{7.2}\selectfont
\begin{frame}[<+->]
  \frametitle{Elemento, qword, compatibilidad, stopword}
   \begin{itemize}
      \item \textbf{Elementos} de una DB: Relaciones, Atributos y Valores
      \item \textbf{Qwords} - pronombres interrogativos
      \begin{itemize}
        \item \{What, where, which, when, who\}, \{Qué, dónde, cuál, cuándo, quién\}
        \item Funcionan como valores especiales (el valor preguntado)
      \end{itemize}
      \item \textbf{Compatibilidad}
      \begin{itemize}
          \item Valor $\rightarrow$ Atributo (Macri $\rightarrow$ HeadOfState)
          \item Atributo  $\rightarrow$  Relación (HeadOfState $\rightarrow$ Country)
          \item Valor $\rightarrow$ Relaciones de sus atributos (Macri $\rightarrow$ Country)
          \item {\color{blue}Q-words $\rightarrow$ Atributos} (A manos)
          \begin{itemize}
            \item Who $\rightarrow$ HeadOfState, When $\rightarrow$ IndependenceYear , What $\rightarrow$ Varios atributos.
          \end{itemize}
      \end{itemize}
        \item \textbf{Marcador sintáctico} (stopword):
      \begin{itemize}
        \item Palabras que no aportan y se tiran (v.gr: y, el, la, etc.) (a mano)
      \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[<+->]
 \frametitle{Lexicón}
  \begin{block}{Lexicón: Espacio semántico a partir de la DB}
    \begin{itemize}
      \item Elementos de la DB $\rightarrow$ Wordnet $\rightarrow$ Lexicón
      \item Cada item del lexicón se llama \textbf{token}
      \item Es un sinónimo para uno o más elementos de la base de datos (\textbf{\dq{se corresponde con}})
      %\item \fontsize{7.5pt}{7.2}\selectfont Notas: TokenAugmenter. Polisemia. Problemas.
    \end{itemize}
  \end{block}  
  \begin{itemize}
      \item Se generan sinónimos lematizados para cada palabra usando Wordnet y se combinan:
      \begin{itemize}
        \item ExperienciaRequerida $\rightarrow$ \{Experiencia, Requerida\}
        \item experiencia $\rightarrow$ \{experiencia, conocimiento, habilidad,...\}
        \item requerida $\rightarrow$ \{requerir, necesario, indispensable,...\}
        \item \{habilidad, indispensable\} corresponde a ExperienciaRequerida
      \end{itemize}
  \end{itemize}
\end{frame}



\begin{frame}[<+->]
\frametitle{Tokenización completa}

\begin{block}{\textbf{Tokenización completa de una pregunta \textit{q}}}
  \begin{itemize}
    \item Una partición de tokens de la pregunta $q$
    \item Pregunta tratable $\Leftrightarrow$ Marcadores sintácticos + tokens del lexicón
   \end{itemize}
\end{block}

\begin{block}{Tokenizer}<1->
      \begin{itemize}
          \item Rompe la pregunta y consulta al lexicón
          \item Genera tokenizaciones completas que alimentan al Matcher
          \item Propone todos los mapeos entre palabras y elementos de la DB (tokenizaciones completas)
      \end{itemize}
    \end{block}
\end{frame}


\fontsize{11pt}{7.2}\selectfont
\begin{frame}
\frametitle{Ejemplo}
\begin{figure}
  \centering
    \includegraphics[scale=.7]{graficos/popescu-example}
  \caption{La traducción de la pregunta ``What are the HP jobs on a Unix system?'' a una consulta SQL}
  \label{fig:popescu-example}
\end{figure}
\end{frame}

\begin{frame}[<+->]
\frametitle{Matcher}
   
   \begin{block}{Matcher}
     \begin{itemize}
      \item Input
      \begin{itemize}
        \item El tokenizer generó una más particiones de $q$ en items del lexicón (tokenizaciones)
        \item Cada item mapea a uno o más elementos de la DB.
      \end{itemize}
      \item El matcher filtra mapeos válidos (\dq{traducciones válidas})
        \begin{itemize}
          \item  Relaciona cada \textbf{valor} con un único \textbf{atributo}, implícito o explícito usando un algoritmo de max flow.
           \item Cada {\color{blue}atributo} del mapeo tiene un {\color{blue}valor} o {\color{green}qword} compatible y sintácticamente asociado.
        \end{itemize}
    \end{itemize} 
  \end{block}
  
  \begin{itemize}
    \item Las aristas implicadas en el flujo máximo asocian 
    \begin{enumerate}
      \item los tokens de valor y de atributo y los correspondientes elementos (valores y atributos, respectivamente) de la DB y 
      \item pares de valores y atributos entre sí.
    \end{enumerate}
    \end{itemize}
          
\end{frame}

\begin{frame}
  \frametitle{Ejemplo}

  \begin{figure}
    \centering
      \includegraphics[scale=0.3]{graficos/popescu-example-2}
    \caption{El grafo de atributos y valores del Matcher para la pregunta ``What are the HP jobs on a Unix system?''}
    \label{fig:popescu-example-2}
  \end{figure}

\end{frame}

\begin{frame}[<+->]
    \frametitle{Traducción válida / Tratabilidad semántica}    
     Una \textbf{traducción válida} es un mapeo de una tokenización completa de $q$ en elementos de $E$ que cumple 3 condiciones:
    \begin{enumerate}
      \item Cada token se corresponde con un único elemento de $E$.
      \item Cada token de atributo se relaciona con un único token de valor, cumpliendo que:
      \begin{itemize}
        \fontsize{9.5pt}{7.2}\selectfont
        \item el atributo de la base de datos que corresponde al token de atributo y el valor de la base de datos que corresponde al token de valor son compatibles
        \item ambos tokens están sintácticamente asociados \footnotemark 
       \end{itemize}
    \end{enumerate}

    \bigskip
    Una pregunta es \textbf{semánticamente tratable} si:
    \begin{itemize}
      \item Tiene una y solo una q-word 
      \item Tiene al menos una traducción válida
    \end{itemize}


    \footnotetext[1]{\tiny{Falta una condición sobre tokens de relación que no es esencial mencionar}}

\end{frame}

\begin{frame}
\frametitle{Query}    
Una traducción válida de $q$ se traduce trivialmente a una query SQL:
\bigskip
\centering
\begin{tabular}{ r | l }
SELECT &  Elementos apareados con qwords \\
WHERE & Pares de atributos y valores apareados\\
FROM & Todas las relaciones mencionadas \\
\end{tabular}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
{\color{white}\textbf{{\color{white}SELECT}} HeadOfState \newline
{\color{white}\textbf{FROM}} Country \newline
{\color{white}\textbf{WHERE}} Country.Name$=$ {\color{white}`Zimbabwe'}
}}

\bigskip

{\color{white}\textbf{``Robert G. Mugabe''}}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
\textbf{{\color{blue}Who}} $\rightarrow$ Valor de Country.HeadOfState \newline
\textbf{{\color{blue}head state}} $\rightarrow$ Atributo Country.HeadOfState \newline
\textbf{{\color{purple}Zimbabwe}} $\rightarrow$ Valor implícito de Country.Name \newline
}

\bigskip

{\color{white}\textbf{``Robert G. Mugabe''}}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
\textbf{{\color{purple}SELECT}} HeadOfState \newline
{\color{purple}\textbf{FROM}} Country \newline
{\color{purple}\textbf{WHERE}} Country.Name$=$ {\color{green}`Zimbabwe'}
}

\bigskip

\textbf{``Robert G. Mugabe''}

\end{frame}



\subsection{Implementación}

\subsubsection*{Base de datos}
\begin{frame}
\frametitle{Base de datos: World (Country, City y CountryLanguage)}
\begin{figure}
    \includegraphics[width=9.823cm,height=6.004cm]{graficos/fuentes/world-db.png}
\end{figure}
\end{frame}


\subsubsection*{Implementación}


\begin{frame}
\frametitle{Implementación: Charniak parser - chequeo sintáctico}
\begin{itemize}
\item No especificado por los autores
\item Escribimos reglas propias que vinculan hoja sustantivo, adjetivo o adverbio y qwords
\end{itemize}

\end{frame}


\begin{frame}
\frametitle{Charniak parse tree}
\Tree [.S1 [.WHNP [.WP What ] ] [.SQ [.VP [.AUX are ] [.{\color{red}NP} [.DT the ] [.{\color{red}NNP} {\color{red}HP} ] [.{\color{red}NNS} {\color{red}jobs} ] ] [.PP [.IN on ] [.{\color{red}NP} [.DT a ] [.{\color{red}NNP} {\color{red}Unix} ] [.{\color{red}NN} {\color{red}system} ] ] ] ] ] [.. ? ] ] \\
{\color{red}Regla 1 - Sustantivos \dq{hermanos}}

\end{frame}

\begin{frame}
\frametitle{Charniak parse tree}
\Tree [.{\color{blue}S1} [.{\color{blue}WHNP} [.{\color{blue}WP} {\color{blue}What} ] ] [.{\color{blue}SQ} [.{\color{blue}VP} [.AUX are ] [.{\color{blue}NP} [.DT the ] [.{\color{blue}NNP} {\color{blue}HP} ] [.{\color{blue}NNS} {\color{blue}jobs} ] ] [.PP [.IN on ] [.NP [.DT a ] [.NNP Unix ] [.NN system ] ] ] ] ] [.. ? ] ] \\
{\color{blue}Regla 2: qwords a sustantivos}

\end{frame}

\begin{frame}
\frametitle{Charniak parse tree}
\Tree [.S1 [.WHNP [.WP What ] ] [.SQ [.{\color{purple}VP} [.AUX are ] [.{\color{purple}NP} [.DT the ] [.{\color{purple}NNP} {\color{purple}HP} ] [.NNS jobs ] ] [.{\color{purple}PP} [.IN on ] [.{\color{purple}NP} [.DT a ] [.{\color{purple}NNP} {\color{purple}Unix} ] [.{\color{purple}NN} {\color{purple}system} ] ] ] ] ] [.. ? ] ] \\
{\color{purple}Regla 3: sintagma nominal a sintagma preposicional}

\end{frame}


\subsubsection*{Ejemplos}
\begin{frame}
\frametitle{Ejemplos}
  \begin{enumerate}
    \item Who is the head of state of Zimbabwe?
    \bigskip
    \item What caribbean countries are also considered north american?
  \end{enumerate}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: ``Who is the head of state of Zimbabwe?''}
Ejemplo 1:\newline
  \Large{``Who is the head of state of Zimbabwe?''}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer}
1. Separar en palabras, eliminar puntuaciones y pasar a lower case:\newline
  \Large{``{\color{blue}w}ho is the head of state of {\color{blue}z}imbabwe{\color{red}\st{?}}''}
\end{frame}


\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer}
1. Separar en palabras, eliminar puntuaciones y pasar a lower case:\newline
  \Large{\{{\color{blue}w}ho, is, the, head, of, state, of, {\color{blue}z}imbabwe\}}
\end{frame}
\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer}
2. Lematizar las palabras, eliminar marcadores sintácticos:\newline
  \Large{\{who, {\color{red}\st{is}}, {\color{red}\st{the}}, head, {\color{red}\st{of}}, state, {\color{red}\st{of}}, zimbabwe\}}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer}
2. Lematizar las palabras, eliminar marcadores sintácticos:\newline
  \Large{\{who, head, state, zimbabwe\}}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - tokens para who}
3. Obtener tokens para cada lema \newline
    \Large{$getTokens(who)\ \rightarrow \{$'who'$\}$}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - tokens para head}
3. Obtener tokens para cada lema \newline
    \Large{$
    getTokens(head)\ \rightarrow \{$ 'head country', 'head teacher body politic', 'head body politic', 'head teacher land', 'read / write head dos', 'heading provincial', 'heading state', 'heading commonwealth', 'read / write head body politic', 'head word land', 'head state of matter', 'read / write head provincial', 'read / write head state department', 'head province',  'heading res publica', 'read / write head nation', (51 más)...$\}$}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - tokens para state}
3. Obtener tokens para cada lema \newline
  \Large{ $getTokens(state)\ \rightarrow  \{$'heart eastern united states', 'centre eastern united states', 'central eastern united states', 'centrical eastern united states', 'midsection eastern united states', 'midriff eastern united states', 'centric eastern united states', 'center eastern united states', 'north western united states', (702 más)...$\}$}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - tokens para Zimbabwe}
3. Obtener tokens para cada lema \newline
  \Large{$getTokens(zimbabwe)\ \rightarrow \{$'zimbabwe', 'republic of zimbabwe', 'capital of zimbabwe'$\}$}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - intersección}
4. Filtrar solo tokens cuyos lemas estén en la pregunta\newline
  \Large{$getTokens(zimbabwe)\ \rightarrow \{$'zimbabwe', {\color{red}\st{'republic of zimbabwe'}}, {\color{red}\st{'capital of zimbabwe'}}$\}$ }
\end{frame}


\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - intersección}
4. Filtrar solo tokens cuyos lemas estén en la pregunta\newline
  \Large{$getTokens(zimbabwe)\ \rightarrow \{$'zimbabwe'$\}$}
\end{frame}


\begin{frame}[t]
\frametitle{Ejemplo 1: Tokenizer - intersección}
4. Filtrar solo tokens cuyos lemas estén en la pregunta\newline
  \Large{
    $getTokens(zimbabwe) \rightarrow \{$'zimbabwe'$\}$\newline
    $getTokens(who)\ \rightarrow \{$'who'$\}$\newline
    $getTokens(head) \rightarrow \{$'head state','heading state'$\}$\newline
    $getTokens(state) \rightarrow  \{$'state','head state','heading state'$\}$
}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: ``Who is the head of state of Zimbabwe?''}
 5. Generar el conjunto de partes de todos los tokens.\newline
  \Large{
      $\emptyset$,\newline
      \{'zimbabwe', 'state'\},\newline
      \{'zimbabwe', '{\color{red}state}', 'head {\color{red}state}', 'who'\},\newline
      \{'head state', 'zimbabwe', 'who'\},\newline
      \{'{\color{red}heading state}', 'zimbabwe', '{\color{red}head state}', 'who'\},\newline
      ...
  }\newline

  \normalsize{Para cada uno de estas \textit{tokenizaciones}, verificar:
  \begin{itemize}
    \item Que sus palabras cubran la pregunta original.
    \item Que no haya palabras repetidas entre los tokens.
  \end{itemize}
  }
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Tokenizaciones completas}

\begin{center}

$q = \text{``Who is the head of state of Zimbabwe?''}$
\end{center}
 \begin{equation*}
    CompleteTokenizations(q) = \begin{cases}
               \text{who, head state, zimbabwe} \\
               \\
               \\
               \text{who, heading state, zimbabwe} \\
           \end{cases}
\end{equation*}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Lexicón - Tokens $\rightarrow$ Elementos}
Obtener elementos de la DB para cada token\newline
  \Large{
    $zimbabwe \rightarrow Zimbabwe$ (Valor de Country.Name)
    }
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Lexicón - Tokens $\rightarrow$ Elementos}
Obtener elementos de la DB para cada token\newline
  \Large{
    $\text{head state} \rightarrow HeadOfState$ (Atributo de Country)
    }
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Lexicón - Tokens $\rightarrow$ Elementos}
Obtener elementos de la DB para cada token\newline
  \Large{
    $\text{heading state} \rightarrow HeadOfState$ (Atributo de Country)
    }
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Lexicón - Tokens $\rightarrow$ Elementos}
Obtener elementos de la DB para cada token\newline
  \Large{
    $who \rightarrow Who$ (Qword compatible con HeadOfState)
    }
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Matcher - Grafo de atributos y valores}
\begin{figure}
  \centering
    \includegraphics[scale=.33]{graficos/presentacion/ejemplo-grafo-matcher-1-2}
\end{figure}
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Matcher - Grafo de atributos y valores}
\begin{figure}
  \centering
    \includegraphics[scale=.33]{graficos/presentacion/ejemplo-grafo-matcher-1-3}
\end{figure}
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Matcher - Grafo de atributos y valores}
\begin{figure}
  \centering
    \includegraphics[scale=.33]{graficos/presentacion/ejemplo-grafo-matcher-1-4}
\end{figure}
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Matcher - Grafo de atributos y valores}
\begin{figure}
  \centering
    \includegraphics[scale=.33]{graficos/presentacion/ejemplo-grafo-matcher-1-5}
\end{figure}
\end{frame}

\begin{frame}
\frametitle{Ejemplo 1: Matcher - Grafo de atributos y valores}
\begin{figure}
  \centering
    \includegraphics[scale=.33]{graficos/presentacion/ejemplo-grafo-matcher-1-6}
\end{figure}
\end{frame}
\begin{frame}[t]
\frametitle{Ejemplo 1: Matcher - notas}
\Large{``{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}?''}
\normalsize{
\begin{itemize}
  \item {\color{blue}head state} es el atributo {\color{blue}Country.HeadOfState}
  \item {\color{blue}Who} es un valor (especial) de {\color{blue}Country.HeadOfState}
  \item {\color{purple}Zimbabwe} es un valor de Country.Name ({\color{purple}implícito})
  \item No desambigua nada (los tokens tiene un solo elemento asociado)
\end{itemize}
}
\bigskip
Los tokens `who' y `head state' deben estar sintácticamente asociados

\end{frame}
\begin{frame}[t]
\frametitle{Ejemplo 1: Matcher - Asociación sintáctica - Regla 1}
\Large{Regla 1: who $\rightarrow$ head}
\begin{center}
\begin{figure}
  \centering
    \includegraphics[scale=.5]{graficos/presentacion/ejemplo-charniak-2}
\end{figure}

\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Matcher - Asociación sintáctica - Regla 6}
\Large{Regla 6: head $\rightarrow$ state}
\begin{center}

\begin{figure}
  \centering
    \includegraphics[scale=.5]{graficos/presentacion/ejemplo-charniak-1}
\end{figure}
\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{Who is the head of state of Zimbabwe? 
\bigskip
\newline
{\color{white}\textbf{{\color{white}SELECT}} HeadOfState \newline
{\color{white}\textbf{FROM}} Country \newline
{\color{white}\textbf{WHERE}} Country.Name$=$ {\color{white}`Zimbabwe'}
}}

\bigskip

{\color{white}\textbf{``Robert G. Mugabe''}}

\end{frame}



\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
{\color{white}\textbf{{\color{white}SELECT}} HeadOfState \newline
{\color{white}\textbf{FROM}} Country \newline
{\color{white}\textbf{WHERE}} Country.Name$=$ {\color{white}`Zimbabwe'}
}}

\bigskip

{\color{white}\textbf{``Robert G. Mugabe''}}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
\textbf{{\color{blue}Who}} $\rightarrow$ Valor de Country.HeadOfState \newline
\textbf{{\color{blue}head state}} $\rightarrow$ Atributo Country.HeadOfState \newline
\textbf{{\color{purple}Zimbabwe}} $\rightarrow$ Valor implícito de Country.Name \newline
}

\bigskip

{\color{white}\textbf{``Robert G. Mugabe''}}

\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo 1: Generador de Queries}
\Large{{\color{blue}Who} \st{is} \st{the} {\color{blue}head} \st{of} {\color{blue}state} \st{of} {\color{purple}Zimbabwe}? 
\bigskip
\newline
\textbf{{\color{purple}SELECT}} HeadOfState \newline
{\color{purple}\textbf{FROM}} Country \newline
{\color{purple}\textbf{WHERE}} Country.Name$=$ {\color{green}`Zimbabwe'}
}

\bigskip

\textbf{``Robert G. Mugabe''}

\end{frame}



\begin{frame}[<+->]
\frametitle{Ejemplo 2: What caribbean countries are also considered north american?}
  \begin{itemize}
    \item ``What caribbean countries are also considered north american?''
    \item Separar, puntuacion, lower case: \{what, caribbean, countries, are, also, considered, north, american\}
    \item Lematizar: \{what, caribbean, {\color{blue}country}, {\color{blue}is}, also, {\color{blue}consider}, north, american\}
    \item Stopwords: \{what, caribbean, country, north, american\}
    \item Obtener tokens para cada lema y preservar los presentes en la pregunta:
      \begin{itemize}
        \item $getTokens(what)\ \rightarrow \{$'what'$\}$
        \item $getTokens(caribbean)\ \rightarrow \{$'caribbean'$\}$
        \item $getTokens(country)\ \rightarrow  \{$'country'$\}$
        \item $getTokens(north)\ \rightarrow \{$'north american'$\}$
        \item $getTokens(american)\ \rightarrow \{$'north american', 'american'$\}$
      \end{itemize}
  \end{itemize}
  
\end{frame}
\begin{frame}[<+->]
\frametitle{Ejemplo 2: Tokenizer}

  \begin{itemize}
  \item Generar el conjunto de partes de todos los tokens hasta aquí obtenidos.
    \begin{itemize}
      \item    \{ $\emptyset$, \{'north american'\}, \{'what', 'american', 'country'\}, \{'north american', 'what', 'american', 'country'\}, \{'american', 'caribbean'\}, ...\}
    \end{itemize}
  \item Para cada uno de estos subconjuntos, verificar:
  \begin{enumerate}
    \item que los lemas de sus tokens cubran completamente la pregunta original
    \item que no haya lemas repetidos entre los tokens.
    \end{enumerate}
      \item Los lemas significativos son: \newline \{what, caribbean, country, north, american\}
      \item Solo una tokenización los cubren sin repetir lemas: \newline \{'north american', 'what', 'caribbean', 'country'\}
      \item Queda eliminado el token 'american'.
  \end{itemize}
\end{frame}

\begin{frame}[<+->]
\frametitle{Lexicón: Tokens $\rightarrow$ Elementos DB}
Se obtienen todos los elementos que \textit{corresponden} a cada token:
  \begin{itemize}
    \item caribbean $\rightarrow$ Caribbean (Valor de Country.Region \textbf{y} Valor de Country.Continent)
    \item north america $\rightarrow$ North America (Valor de Country.Region)
    \item country $\rightarrow$ Country (Relación)
    \item what $\rightarrow$ What (Q-valor \textit{compatible} con un montón de Atributos)
  \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Matcher: Grafo atributo-valor}
\begin{figure}
  \centering
    \includegraphics[scale=.43]{graficos/presentacion/ejemplo-grafo-2}
    \caption{Grafo con desambiguación}
\end{figure}
\end{frame}

\begin{frame}[<+->]
\frametitle{Ejemplo 2: Notas y query}
Notar en el grafo:
  \begin{itemize}
    \item Caribbean es ambigüo.
    \item Como north american solo puede ser Continent, caribbean va a ser Region (para maximizar el flujo)
  \end{itemize}

Query final:\newline
\Large{\textbf{{\color{purple}SELECT DISTINCT} Country.Name \newline{\color{purple}FROM} Country \newline{\color{purple}WHERE} Country.Continent $=$ {\color{green}'North America'} \newline{\color{purple}AND} Country.Region $=$ {\color{green}'Caribbean'}}}

\end{frame}



\begin{frame}
\frametitle{Corridas}
Corridas sobre 200 preguntas escritas a mano para testing
\begin{center}
\begin{table}[h]
\centering
\begin{tabular}{| r |  p{12cm} | }

Total & Categoría \\ 
91 & Respuesta exacta \\ 
27 & Ambiguas inherentemente + pedido de reformulación \\ 
11 & Sin respuesta (razonable, fuera de scope) \\
32 & Fallas simples en stopwords o en lexicón \\
10 & Ambiguas por problemas de sinonimia en el modelo \\
4 & Ambiguas. Problemas del lexicón. \\
6 & El analizador sintáctico no encontró asociación. \\
19 & Problemáticas. Análisis más detallado en texto. \\
200 & Total \\
\end{tabular}
\caption{Resultados de la primera corrida sobre las preguntas de test}
\label{table:popescu-results-1}
\end{table}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Corridas}
Corridas sobre 200 preguntas escritas a mano para testing
\begin{center}
\begin{table}[h]
\centering
\begin{tabular}{| r |  p{12cm} |}
Total & Categoría \\ 
126 & Respuesta exacta \\ 
38 & Ambiguas \\ 
36 & Sin respuesta\\ 
200 & Total \\ 

\end{tabular}
\caption{Resultados sobre las preguntas de test (con correcciones)}
\label{table:popescu-results-3}
\end{table}
\end{center}
\end{frame}


\subsubsection*{Conclusiones y limitaciones}

\begin{frame}[<+->]
\frametitle{Conclusiones y limitaciones: dominio cerrado}
Algunas mejoras
\begin{itemize}
\item Generación del lexicón
\item Generación de stopwords
\item En el Lexicón, agregar un desambiguador de sentidos para los sinónimos de los tokens
\item Soportar diferentes paths para aparear (\textit{joinear}) tablas.
%\item Soportar tokens multi tipados en el Matcher.
%\item Soportar desambiguación de relaciones en el Matcher.
\item Interfaz con el usuario: SQL $\rightarrow$ respuesta
\item CharniakParseTree: evaluar con un lingüista profesional las reglas

\end{itemize}
\end{frame}


\begin{frame}[<+->]
\frametitle{Conclusiones y limitaciones: dominio cerrado}

\begin{itemize}
  \item Hipótesis fecunda: subset de preguntas. Tratabilidad semántica.
  \begin{itemize}
    \item \textit{zonas} computables del lenguaje
    \item \dq{explicar con palabras de este mundo que partió de mí un barco llevándome} $\rightarrow$ {\color{red}No}
    \item \dq{¿En qué año murió Alejandra Pizarnik?} $\rightarrow$ {\color{green}Sí}
  \end{itemize}
  \item La implementación requiere desarrollo humano específico
  \begin{itemize}
    \item Mundo más cercano a sistemas usuales que a sistemas de machine learning
    \item De todos modos, los tiempos no son tan prohibitivos como podría parecer
  \end{itemize}
  \item Util para interfaces de voz
  \end{itemize}

\end{frame}




